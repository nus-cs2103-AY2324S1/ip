package duke;

import duke.command.Command;
import duke.task.DukeList;

/**
<<<<<<< HEAD
 * Represents the main class for the Duke application.
 * Initializes and coordinates various components of the application.
 */
public class Duke {

    /** The DukeList that stores and manages tasks. */
    private DukeList dukelist;

    /** The user interface for interacting with Duke. */
    private Ui ui;

    /** The storage component for reading and writing tasks to a file. */
    private Storage storage;

    /** The file path where tasks are stored. */
    private static final String FILE_PATH = "data/duke.txt";
    private Parser parser;

    /**
     * Constructs a Duke object with the specified file path.
     *
     * @param filePath The path to the data file for storage.
     */
    public Duke(String filePath) {
        parser = new Parser();
        ui = new Ui();
        this.storage = new Storage(filePath);
        try {
            this.dukelist = new DukeList(this.storage.getData());
        } catch (DukeException e) {
            this.dukelist = new DukeList();
            System.out.println("error");
        }
    }

    /**
     * Gets a response from Duke based on user input.
     *
     * @param userInput The user's input.
     * @return The response generated by Duke.
     */
    public String getResponse(String userInput) {
        String responseStr = null;
        try {
            Command c = this.parser.parseCommand(userInput);
            responseStr = c.execute(dukelist, storage);
        } catch (DukeException e) {
            return e.getMessage();
        }
        return responseStr;

    }
}
